from itertools import combinations
from collections import defaultdict

# 시너지와 최소 인원 정의
synergy_min_units = {
    "광신도": 3, "나무정령": 3, "닌자": 1, "대장군": 3, "선지자": 2,
    "신성": 2, "영혼": 2, "용의 영혼": 3, "우화": 3, "추방자": 1,
    "행운": 3, "결투가": 2, "귀감": 2, "명사수": 2, "선봉대": 2,
    "신비술사": 2, "싸움꾼": 2, "암살자": 2, "요술사": 3, "조율자": 2,
    "처형자": 2, "학살자": 3, "흡수자": 2
}

# 챔피언과 시너지 정의
champions = {
    "가렌": ["대장군", "선봉대"],
    "나서스": ["신성", "흡수자"],
    "니달리": ["대장군", "명사수"],
    "다이애나": ["영혼", "암살자"],
    "마오카이": ["나무정령", "싸움꾼"],
    "브랜드": ["용의 영혼", "요술사"],
    "야스오": ["추방자", "결투가"],
    "엘리스": ["광신도", "귀감"],
    "오공": ["신성", "선봉대"],
    "탐 켄치": ["행운", "싸움꾼"],
    "트리스타나": ["용의 영혼", "명사수"],
    "트위스티드 페이트": ["광신도", "요술사"],
    "피오라": ["선지자", "결투가"],
    "노틸러스": ["우화", "선봉대"],
    "라칸": ["나무정령", "귀감"],
    "룰루": ["나무정령", "요술사"],
    "바이": ["대장군", "싸움꾼"],
    "브라움": ["용의 영혼", "선봉대"],
    "블라디미르": ["광신도", "흡수자"],
    "애니": ["행운", "요술사"],
    "자르반 4세": ["대장군", "귀감"],
    "잔나": ["선지자", "신비술사"],
    "잭스": ["신성", "결투가"],
    "제드": ["닌자", "학살자"],
    "티모": ["영혼", "명사수"],
    "파이크": ["광신도", "암살자", "학살자"],
    "누누와 윌럼프": ["나무정령", "싸움꾼"],
    "니코": ["우화", "신비술사"],
    "다리우스": ["행운", "학살자"],
    "베이가": ["나무정령", "요술사"],
    "쉬바나": ["용의 영혼", "싸움꾼"],
    "시비르": ["광신도", "명사수"],
    "아칼리": ["닌자", "암살자"],
    "유미": ["영혼", "신비술사"],
    "이렐리아": ["신성", "선지자", "조율자"],
    "카타리나": ["행운", "대장군", "암살자"],
    "칼리스타": ["광신도", "결투가"],
    "케넨": ["닌자", "귀감"],
    "킨드레드": ["영혼", "처형자"],
    "모르가나": ["선지자", "흡수자"],
    "세주아니": ["행운", "선봉대"],
    "쉔": ["닌자", "신비술사", "조율자"],
    "아우렐리온 솔": ["용의 영혼", "요술사"],
    "아트록스": ["광신도", "선봉대"],
    "올라프": ["용의 영혼", "학살자"],
    "자야": ["나무정령", "귀감", "처형자"],
    "초가스": ["우화", "싸움꾼"],
    "케일": ["신성", "처형자"],
    "탈론": ["선지자", "암살자"],
    "트린다미어": ["대장군", "결투가", "학살자"],
    "리 신": ["신성", "결투가"],
    "사미라": ["무모한 자", "명사수", "학살자"],
    "세트": ["우두머리", "싸움꾼"],
    "스웨인": ["용의 영혼", "흡수자"],
    "아지르": ["대장군", "귀감", "황제"],
    "오른": ["나무정령", "대장장이", "선봉대"],
    "요네": ["추방자", "조율자"],
    "질리언": ["광신도", "신비술사"]
}

def find_valid_combinations(n, m):
    valid_combinations = []
    
    # 모든 챔피언 조합 생성
    for team in combinations(champions.keys(), n):
        synergy_counts = defaultdict(int)
        
        # 시너지 카운트 계산
        for champ in team:
            for synergy in champions[champ]:
                synergy_counts[synergy] += 1
        
        # 활성화된 시너지 필터링
        active_synergies = [
            synergy for synergy, min_count in synergy_min_units.items()
            if synergy_counts.get(synergy, 0) >= min_count
        ]
        
        # 정확히 m개의 시너지가 활성화된 경우 저장
        if len(active_synergies) == m:
            valid_combinations.append((team, active_synergies))
    
    return valid_combinations

# 입력 및 실행
n = int(input("챔피언 수를 입력하세요 (예: 4): "))
m = int(input("활성화할 시너지 수를 입력하세요 (예: 4): "))

result = find_valid_combinations(n, m)

# 결과 출력
print(f"총 {len(result)}개의 조합 발견:")
for team, synergies in result:
    print(f"팀: {team}")
    print(f"시너지: {synergies}")
    print("-" * 50)